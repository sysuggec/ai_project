# 性能优化


## 上下文窗口管理

在上下文窗口最后20%避免进行：
- 大规模重构
- 跨多文件的功能实现
- 复杂交互的调试

低上下文敏感度任务：
- 单文件编辑
- 独立工具创建
- 文档更新
- 简单bug修复

## 扩展思考 + 计划模式

扩展思考默认启用，最多保留31,999个token用于内部推理。

通过以下方式控制扩展思考：
- **切换**：Option+T (macOS) / Alt+T (Windows/Linux)
- **配置**：在 `../../settings.json` 中设置 `alwaysThinkingEnabled`
- **预算上限**：`export MAX_THINKING_TOKENS=10000`
- **详细模式**：Ctrl+O 查看思考输出

对于需要深度推理的复杂任务：
1. 确保扩展思考已启用（默认开启）
2. 启用 **计划模式** 进行结构化处理
3. 使用多轮批评进行彻底分析
4. 使用分角色子agent获取多元视角
