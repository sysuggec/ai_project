<?php

declare(strict_types=1);

namespace App\Converter;

/**
 * 简体字转繁体字转换器
 * 
 * 将简体中文字符串转换为繁体中文
 */
class SimplifiedToTraditionalConverter
{
    /**
     * 简繁对照表（常用字）
     */
    private const CONVERSION_MAP = [
        // 单字
        '国' => '國',
        '中' => '中',
        '华' => '華',
        '人' => '人',
        '民' => '民',
        '共' => '共',
        '和' => '和',
        
        // 常用词汇
        '软' => '軟',
        '件' => '體',
        '网' => '網',
        '络' => '絡',
        '数' => '數',
        '据' => '據',
        '电' => '電',
        '脑' => '腦',
        
        // 其他常用简繁对照
        '体' => '體',
        '个' => '個',
        '们' => '們',
        '学' => '學',
        '习' => '習',
        '书' => '書',
        '电' => '電',
        '话' => '話',
        '门' => '門',
        '车' => '車',
        '马' => '馬',
        '鸟' => '鳥',
        '鱼' => '魚',
        '龙' => '龍',
        '风' => '風',
        '云' => '雲',
        '雨' => '雨',
        '雪' => '雪',
        '时' => '時',
        '间' => '間',
        '东' => '東',
        '西' => '西',
        '南' => '南',
        '北' => '北',
        '后' => '後',
        '前' => '前',
        '左' => '左',
        '右' => '右',
        '里' => '裡',
        '面' => '面',
        '头' => '頭',
        '手' => '手',
        '眼' => '眼',
        '见' => '見',
        '听' => '聽',
        '说' => '說',
        '读' => '讀',
        '写' => '寫',
        '字' => '字',
        '词' => '詞',
        '语' => '語',
        '言' => '言',
        '计' => '計',
        '划' => '劃',
        '设' => '設',
        '计' => '計',
        '开' => '開',
        '发' => '發',
        '关' => '關',
        '闭' => '閉',
        '进' => '進',
        '出' => '出',
        '入' => '入',
        '来' => '來',
        '去' => '去',
        '变' => '變',
        '化' => '化',
        '新' => '新',
        '旧' => '舊',
        '长' => '長',
        '短' => '短',
        '大' => '大',
        '小' => '小',
        '多' => '多',
        '少' => '少',
        '高' => '高',
        '低' => '低',
        '快' => '快',
        '慢' => '慢',
        '好' => '好',
        '坏' => '壞',
        '对' => '對',
        '错' => '錯',
        '是' => '是',
        '非' => '非',
        '有' => '有',
        '无' => '無',
        '真' => '真',
        '假' => '假',
        '繁' => '繁',
        '简' => '簡',
    ];

    /**
     * 将简体中文字符串转换为繁体中文
     *
     * @param string $text 简体中文文本
     * @return string 繁体中文文本
     */
    public function convert(string $text): string
    {
        if ($text === '') {
            return '';
        }

        $result = '';
        $length = mb_strlen($text, 'UTF-8');

        for ($i = 0; $i < $length; $i++) {
            $char = mb_substr($text, $i, 1, 'UTF-8');
            $result .= $this->convertChar($char);
        }

        return $result;
    }

    /**
     * 转换单个字符
     *
     * @param string $char 单个字符
     * @return string 转换后的字符
     */
    private function convertChar(string $char): string
    {
        return self::CONVERSION_MAP[$char] ?? $char;
    }
}
